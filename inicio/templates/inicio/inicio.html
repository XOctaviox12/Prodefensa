{% extends "inicio/home.html" %}
{% load static %}
{% block titulo %}inicio{% endblock %}
{% block contenido %}
<style>
  /* Sección de beneficios */
  .benefits-section {
    background-color: #f2f0f5;
    padding: 60px 20px;
    text-align: center;
  }

  .benefits-container {
    max-width: 1200px;
    margin: auto;
  }

  .benefits-container h2 {
    font-size: clamp(1.8rem, 4vw, 2.6rem);
    margin-bottom: 25px;
    color: #111;
    font-weight: 700;
  }

  .benefits-container p {
    font-size: clamp(0.95rem, 2vw, 1.1rem);
    color: #333;
    max-width: 850px;
    margin: 0 auto 60px;
    line-height: 1.6;
  }

  .benefits-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 30px;
    justify-content: center;
    margin-bottom: 60px;
  }

  .benefit-card {
    position: relative;
    overflow: hidden;
    border-radius: 14px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.12);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .benefit-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0,0,0,0.18);
  }

  .benefit-card img {
    width: 100%;
    height: auto;
    max-height: 320px;
    object-fit: cover;
    border-radius: 14px;
    transition: transform 0.4s ease;
  }

  .benefit-card:hover img {
    transform: scale(1.07);
  }

  .benefit-label {
    position: absolute;
    bottom: 12px;
    left: 12px;
    background-color: rgba(255, 255, 255, 0.95);
    color: #111;
    font-weight: 600;
    font-size: clamp(0.9rem, 1.5vw, 1.05rem);
    padding: 10px 14px;
    border-radius: 8px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.12);
  }

  .fra-container {
    background-color: #0048ad;
    padding: 60px 20px;
    width: 100%;
  }

  .fra-content h2 {
    color: #fff;
    font-size: clamp(1.5rem, 3vw, 2.2rem);
    line-height: 1.6;
    font-weight: 600;
    margin: 0;
  }

  /* Eventos próximos */
  .event-card img {
    width: 100%;
    height: auto;
    max-height: 220px;
    object-fit: cover;
  }

  .event-card h3 {
    font-size: clamp(1.1rem, 2vw, 1.3rem);
  }

  .event-card p {
    font-size: clamp(0.85rem, 1.5vw, 1rem);
  }

  /* Eventos pasados tipo carrusel */
  .past-events-container {
    display: flex;
    gap: 20px;
    overflow-x: auto;
    scroll-behavior: smooth;
    padding: 20px 0;
  }

  .past-events-container::-webkit-scrollbar {
    display: none;
  }

  .past-event-card {
    flex: 0 0 auto;
    width: 220px;
    display: block;
    border-radius: 10px;
    background: white;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    transition: transform 0.3s ease;
  }

  .past-event-card:hover {
    transform: translateY(-5px);
  }

  .past-event-card img {
    width: 100%;
    height: auto;
    max-height: 150px;
    object-fit: cover;
  }

  .past-event-card p {
    margin: 10px 0;
    font-weight: 600;
    text-align: center;
    font-size: clamp(0.85rem, 1.3vw, 1rem);
    padding: 0 5px;
  }

  @media (max-width: 480px) {
    .benefits-section {
      padding: 40px 10px;
    }
    .fra-container {
      padding: 40px 10px;
    }
    .past-event-card {
      width: 180px;
    }
  }
</style>

<section class="benefits-section">
  <div class="benefits-container">
    <h2>¡Obtén grandes beneficios!</h2>
    <p>
      Formar parte de Pro Defensa CIPOL significa integrarse a una comunidad
      comprometida con elevar la dignidad policial y promover una cultura de
      respeto, justicia y paz social.
    </p>
  </div>

  <div class="benefits-grid">
    <div class="benefit-card">
      <img src="{% static 'img/formacion_desarrollo.jpeg' %}">
      <div class="benefit-label">Formación y desarrollo profesional</div>
    </div>

    <div class="benefit-card">
      <img src="{% static 'img/comunidad.jpg' %}">
      <div class="benefit-label">Comunidad y reconocimiento</div>
    </div>

    <div class="benefit-card">
      <img src="{% static 'img/beneficios.png' %}">
      <div class="benefit-label">Beneficios y descuentos exclusivos</div>
    </div>

    <div class="benefit-card">
      <img src="{% static 'img/impacto_social.jpg' %}">
      <div class="benefit-label">Impacto social y propósito</div>
    </div>
  </div>

  <div class="fra-container">
    <div class="fra-content">
      <h2>Rostros distintos, uniformes muchos, un mismo corazón.</h2>
    </div>
  </div>
</section>

<section style="padding:60px 20px;">
  <h2 style="text-align:center; font-size:clamp(1.8rem, 4vw, 2.2rem); font-weight:700;">Próximos eventos</h2>

  <div style="display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:30px; margin-top:40px;">
    {% for evento in eventos_proximos %}
    <div class="event-card" style="background:white; border-radius:14px; overflow:hidden; box-shadow:0 5px 15px rgba(0,0,0,0.12);">
      {% if evento.imagen %}
      <img src="{{ evento.imagen.url }}">
      {% endif %}

      <div style="padding:20px;">
        <h3>{{ evento.titulo }}</h3>
        <p style="color:#0048ad; font-weight:600;">{{ evento.siguiente_fecha }}</p>
        <p>{{ evento.descripcion|truncatewords:20 }}</p>

        <a href="{% url 'detalle_evento' evento.slug %}"
           style="color:white; background:#0048ad; padding:10px 18px; border-radius:8px; text-decoration:none; font-weight:600;">
           Ver más
        </a>
      </div>
    </div>
    {% endfor %}
  </div>
</section>

{% if evento_mas_cercano %}
<section style="padding:60px 20px; background:#0048ad; color:white; text-align:center;">
  <h2 style="font-size:clamp(1.6rem, 3vw, 2rem);">Próximo gran evento</h2>
  <h3 style="font-size:clamp(2rem,4vw,2.5rem); font-weight:700;">{{ evento_mas_cercano.titulo }}</h3>
  <p style="font-size:clamp(1rem,2vw,1.2rem);">Fecha: {{ evento_mas_cercano.siguiente_fecha }}</p>
  <div id="countdown" style="font-size:clamp(1.2rem,2.5vw,1.6rem); font-weight:600;"></div>

  <a href="{% url 'detalle_evento' evento_mas_cercano.slug %}"
     style="margin-top:25px; display:inline-block; padding:12px 25px; background:white; color:#0048ad; border-radius:10px; font-weight:700;">
     Ver detalles
  </a>
</section>
<script>
  const fechaEvento = new Date("{{ evento_mas_cercano.siguiente_fecha }}").getTime();

  setInterval(()=>{
    const ahora = new Date().getTime();
    const distancia = fechaEvento - ahora;

    if(distancia <= 0){
      document.getElementById('countdown').innerHTML = "¡Es hoy!";
      return;
    }

    let dias = Math.floor(distancia / (1000 * 60 * 60 * 24));
    let horas = Math.floor((distancia % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    let minutos = Math.floor((distancia % (1000 * 60 * 60)) / (1000 * 60));

    document.getElementById('countdown').innerHTML =
      `${dias} días - ${horas} hrs - ${minutos} min`;
  }, 1000);
</script>
{% endif %}

<section style="padding:60px 20px; background:#f7f7f7;">
  <h2 style="text-align:center; font-size:clamp(1.6rem,3vw,2rem); font-weight:700;">Eventos pasados</h2>

  {% if eventos_pasados %}
  <div class="past-events-container">
    {% for evento in eventos_pasados %}
    <a href="{% url 'detalle_evento' evento.slug %}" class="past-event-card">
      {% if evento.imagen %}
      <img src="{{ evento.imagen.url }}">
      {% endif %}
      <p>{{ evento.titulo }}</p>
    </a>
    {% endfor %}
  </div>
  {% else %}
  <p style="text-align:center; font-size:1.1rem; margin-top:20px; font-weight:600; color:#555;">
    No hay eventos pasados.
  </p>
  {% endif %}
</section>

{% endblock %}
