{% extends "inicio/home.html" %}
{% load static %}
{% block titulo %}inicio{% endblock %}
{% block contenido %}
<style>
  /* Sección de beneficios */
  .benefits-section {
    background-color: #f2f0f5;
    padding: 60px 20px;
    text-align: center;
  }

  .benefits-container {
    max-width: 1200px;
    margin: auto;
  }

  .benefits-container h2 {
    font-size: clamp(1.8rem, 4vw, 2.6rem);
    margin-bottom: 25px;
    color: #111;
    font-weight: 700;
  }

  .benefits-container p {
    font-size: clamp(0.95rem, 2vw, 1.1rem);
    color: #333;
    max-width: 850px;
    margin: 0 auto 60px;
    line-height: 1.6;
  }

  .benefits-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 30px;
    justify-content: center;
    margin-bottom: 60px;
  }

  .benefit-card {
    position: relative;
    overflow: hidden;
    border-radius: 14px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.12);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    height: 320px; /* Altura fija para todas las tarjetas */
  }

  .benefit-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0,0,0,0.18);
  }

  .benefit-card img {
    width: 100%;
    height: 100%; /* Ocupa toda la altura de la tarjeta */
    object-fit: contain; /* Cambiado de cover a contain para mostrar imagen completa */
    border-radius: 14px;
    transition: transform 0.4s ease;
    background-color: #f8f8f8; /* Fondo para áreas vacías */
  }

  .benefit-card:hover img {
    transform: scale(1.07);
  }

  .benefit-label {
    position: absolute;
    bottom: 12px;
    left: 12px;
    background-color: rgba(255, 255, 255, 0.95);
    color: #111;
    font-weight: 600;
    font-size: clamp(0.9rem, 1.5vw, 1.05rem);
    padding: 10px 14px;
    border-radius: 8px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.12);
  }

  .fra-container {
    background-color: #0048ad;
    padding: 60px 20px;
    width: 100%;
  }

  .fra-content h2 {
    color: #fff;
    font-size: clamp(1.5rem, 3vw, 2.2rem);
    line-height: 1.6;
    font-weight: 600;
    margin: 0;
  }

  /* Eventos próximos - MEJORADO */
  .events-section {
    padding: 60px 20px;
  }

  .events-section h2 {
    text-align: center;
    font-size: clamp(1.8rem, 4vw, 2.2rem);
    font-weight: 700;
    margin-bottom: 40px;
  }

  .events-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 35px;
    max-width: 1200px;
    margin: 0 auto;
  }

  .event-card {
    background: white;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    display: flex;
    flex-direction: column;
    height: 100%;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border: none;
  }

  .event-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 15px 35px rgba(0,0,0,0.2);
  }

  .event-card img {
    width: 100%;
    height: 280px; /* DUPLICADO: de 220px a 280px */
    object-fit: contain;
    background: linear-gradient(135deg, #f8f8f8 0%, #e8e8e8 100%);
  }

  .event-card-content {
    padding: 25px;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    text-align: center; /* Centrado de todo el contenido */
  }

  .event-card h3 {
    font-size: clamp(1.2rem, 2.2vw, 1.4rem);
    font-weight: 700;
    margin-bottom: 12px;
    color: #111;
    line-height: 1.3;
  }

  .event-date {
    color: #0048ad;
    font-weight: 700;
    font-size: clamp(0.9rem, 1.8vw, 1rem);
    margin-bottom: 15px;
    padding: 6px 12px;
    background-color: #f0f5ff;
    border-radius: 20px;
    display: inline-block;
  }

  .event-card p {
    font-size: clamp(0.9rem, 1.6vw, 1rem);
    color: #555;
    line-height: 1.5;
    margin-bottom: 20px;
    flex-grow: 1;
  }

  .event-card .btn-ver-mas {
    margin-top: auto;
    color: white;
    background: #0048ad;
    padding: 12px 24px;
    border-radius: 10px;
    text-decoration: none;
    font-weight: 600;
    display: inline-block;
    width: fit-content;
    margin-left: auto;
    margin-right: auto;
    transition: background-color 0.3s ease, transform 0.2s ease;
  }

  .event-card .btn-ver-mas:hover {
    background: #003588;
    transform: scale(1.05);
  }

  /* Eventos pasados tipo carrusel */
  .past-events-container {
    display: flex;
    gap: 20px;
    overflow-x: auto;
    scroll-behavior: smooth;
    padding: 20px 0;
  }

  .past-events-container::-webkit-scrollbar {
    display: none;
  }

  .past-event-card {
    flex: 0 0 auto;
    width: 220px;
    display: block;
    border-radius: 10px;
    background: white;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    transition: transform 0.3s ease;
  }

  .past-event-card:hover {
    transform: translateY(-5px);
  }

  .past-event-card img {
    width: 100%;
    height: 150px; /* Altura fija */
    object-fit: contain; /* Cambiado de cover a contain */
    background-color: #f8f8f8; /* Fondo para áreas vacías */
  }

  .past-event-card p {
    margin: 10px 0;
    font-weight: 600;
    text-align: center;
    font-size: clamp(0.85rem, 1.3vw, 1rem);
    padding: 0 5px;
  }

  @media (max-width: 480px) {
    .benefits-section {
      padding: 40px 10px;
    }
    .fra-container {
      padding: 40px 10px;
    }
    .past-event-card {
      width: 180px;
    }
    .benefit-card {
      height: 280px; /* Altura menor en móviles */
    }
    .events-grid {
      grid-template-columns: 1fr;
      gap: 25px;
    }
    .event-card img {
      height: 240px; /* Un poco menor en móviles pero aún grande */
    }
  }
</style>

<section class="benefits-section">
  <div class="benefits-container">
    <h2>¡Obtén grandes beneficios!</h2>
    <p>
      Formar parte de Pro Defensa CIPOL significa integrarse a una comunidad
      comprometida con elevar la dignidad policial y promover una cultura de
      respeto, justicia y paz social.
    </p>
  </div>

  <div class="benefits-grid">
    <div class="benefit-card">
      <img src="{% static 'img/formacion_desarrollo.jpeg' %}">
      <div class="benefit-label">Formación y desarrollo profesional</div>
    </div>

    <div class="benefit-card">
      <img src="{% static 'img/comunidad.jpg' %}">
      <div class="benefit-label">Comunidad y reconocimiento</div>
    </div>

    <div class="benefit-card">
      <img src="{% static 'img/beneficios.png' %}">
      <div class="benefit-label">Beneficios y descuentos exclusivos</div>
    </div>

    <div class="benefit-card">
      <img src="{% static 'img/impacto_social.jpg' %}">
      <div class="benefit-label">Impacto social y propósito</div>
    </div>
  </div>

  <div class="fra-container">
    <div class="fra-content">
      <h2>Rostros distintos, uniformes muchos, un mismo corazón.</h2>
    </div>
  </div>
</section>

<section class="events-section">
  <h2>Próximos eventos</h2>

  <div class="events-grid">
    {% for evento in eventos_proximos %}
    <div class="event-card">
      {% if evento.imagen %}
      <img src="{{ evento.imagen.url }}" alt="{{ evento.titulo }}">
      {% endif %}

      <div class="event-card-content">
        <h3>{{ evento.titulo }}</h3>
        <div class="event-date">{{ evento.siguiente_fecha }}</div>
        <p>{{ evento.descripcion|truncatewords:20 }}</p>

        <a href="{% url 'detalle_evento' evento.slug %}" class="btn-ver-mas">
          Ver más
        </a>
      </div>
    </div>
    {% endfor %}
  </div>
</section>

{% if evento_mas_cercano %}
<section style="padding:60px 20px; background:#0048ad; color:white; text-align:center;">
  <h2 style="font-size:clamp(1.6rem, 3vw, 2rem);">Próximo gran evento</h2>
  <h3 style="font-size:clamp(2rem,4vw,2.5rem); font-weight:700;">{{ evento_mas_cercano.titulo }}</h3>
  <p style="font-size:clamp(1rem,2vw,1.2rem);">Fecha: {{ evento_mas_cercano.siguiente_fecha }}</p>
  <div id="countdown" style="font-size:clamp(1.2rem,2.5vw,1.6rem); font-weight:600;"></div>

  <a href="{% url 'detalle_evento' evento_mas_cercano.slug %}"
     style="margin-top:25px; display:inline-block; padding:12px 25px; background:white; color:#0048ad; border-radius:10px; font-weight:700;">
     Ver detalles
  </a>
</section>
<script>
  const fechaEvento = new Date("{{ evento_mas_cercano.siguiente_fecha }}").getTime();

  setInterval(()=>{
    const ahora = new Date().getTime();
    const distancia = fechaEvento - ahora;

    if(distancia <= 0){
      document.getElementById('countdown').innerHTML = "¡Es hoy!";
      return;
    }

    let dias = Math.floor(distancia / (1000 * 60 * 60 * 24));
    let horas = Math.floor((distancia % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    let minutos = Math.floor((distancia % (1000 * 60 * 60)) / (1000 * 60));

    document.getElementById('countdown').innerHTML =
      `${dias} días - ${horas} hrs - ${minutos} min`;
  }, 1000);
</script>
{% endif %}

<section style="padding:60px 20px; background:#f7f7f7;">
  <h2 style="text-align:center; font-size:clamp(1.6rem,3vw,2rem); font-weight:700;">Eventos pasados</h2>

  {% if eventos_pasados %}
  <div class="past-events-container">
    {% for evento in eventos_pasados %}
    <a href="{% url 'detalle_evento' evento.slug %}" class="past-event-card">
      {% if evento.imagen %}
      <img src="{{ evento.imagen.url }}">
      {% endif %}
      <p>{{ evento.titulo }}</p>
    </a>
    {% endfor %}
  </div>
  {% else %}
  <p style="text-align:center; font-size:1.1rem; margin-top:20px; font-weight:600; color:#555;">
    No hay eventos pasados.
  </p>
  {% endif %}
</section>

{% endblock %}